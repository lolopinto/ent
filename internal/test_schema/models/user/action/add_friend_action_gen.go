// Code generated by github.com/lolopinto/ent/ent, DO NOT EDIT.

package action

import (
	"context"

	"github.com/lolopinto/ent/ent"
	"github.com/lolopinto/ent/ent/actions"
	"github.com/lolopinto/ent/ent/viewer"
	"github.com/lolopinto/ent/internal/test_schema/models"
	builder "github.com/lolopinto/ent/internal/test_schema/models/user"
)

type AddFriendAction struct {
	builder *builder.UserMutationBuilder
}

// AddFriendFromContext is the factory method to get an ...
func AddFriendFromContext(ctx context.Context, user *models.User) *AddFriendAction {
	v, err := viewer.ForContext(ctx)
	if err != nil {
		panic("tried to perform mutation without a viewer")
	}
	return AddFriend(v, user)
}

// AddFriend is the factory method to get an ...
func AddFriend(v viewer.ViewerContext, user *models.User) *AddFriendAction {
	action := &AddFriendAction{}
	builder := builder.NewMutationBuilder(
		v,
		ent.EditOperation,
		action.requiredFields(),
		actions.ExistingEnt(user),
	)
	action.builder = builder
	return action
}

func (action *AddFriendAction) GetBuilder() ent.MutationBuilder {
	return action.builder
}

func (action *AddFriendAction) GetTypedBuilder() *builder.UserMutationBuilder {
	return action.builder
}

func (action *AddFriendAction) GetViewer() viewer.ViewerContext {
	return action.builder.GetViewer()
}

func (action *AddFriendAction) SetBuilderOnTriggers(triggers []actions.Trigger) {
	action.builder.SetTriggers(triggers)
}

func (action *AddFriendAction) SetBuilderOnObservers(observers []actions.Observer) {
	action.builder.SetObservers(observers)
}

func (action *AddFriendAction) SetBuilderOnValidators(validators []actions.Validator) {
	action.builder.SetValidators(validators)
}

func (action *AddFriendAction) GetChangeset() (ent.Changeset, error) {
	return actions.GetChangeset(action)
}

func (action *AddFriendAction) Entity() ent.Entity {
	return action.builder.GetUser()
}

func (action *AddFriendAction) ExistingEnt() ent.Entity {
	return action.builder.ExistingEnt()
}

// AddFriends adds an instance of User to the Friends edge while editing the User ent
func (action *AddFriendAction) AddFriends(users ...*models.User) *AddFriendAction {
	action.builder.AddFriends(users...)
	return action
}

// AddFriendID adds an instance of UserID to the Friends edge while editing the User ent
func (action *AddFriendAction) AddFriendID(userID string, options ...func(*ent.EdgeOperation)) *AddFriendAction {
	action.builder.AddFriendID(userID, options...)
	return action
}
func (action *AddFriendAction) requiredFields() []string {
	return []string{}
}

// Validate returns an error if the current state of the action is not valid
func (action *AddFriendAction) Validate() error {
	return action.builder.Validate()
}

// Save is the method called to execute this action and save change
func (action *AddFriendAction) Save() (*models.User, error) {
	err := actions.Save(action)
	if err != nil {
		return nil, err
	}
	return action.builder.GetUser(), err
}

var _ actions.Action = &AddFriendAction{}
