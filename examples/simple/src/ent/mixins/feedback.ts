/**
 * Copyright whaa whaa
 * Generated by github.com/lolopinto/ent/ent, DO NOT EDIT.
 */
import { Viewer } from "@snowtop/ent";
import {
  FeedbackBaseMixin,
  IFeedbackBase,
} from "../generated/mixins/feedback_base";

export interface IFeedback<TViewer extends Viewer = Viewer>
  extends IFeedbackBase<TViewer> {
  // add custom fields
  isFeedback(): boolean;

  hasLikers(): Promise<boolean>;
}

type Constructor<T extends IFeedback = IFeedback> = new (...args: any[]) => T;

export function isFeedback(ent: unknown): ent is IFeedback {
  const o = ent as IFeedback;
  return (o.isFeedback && o.isFeedback()) ?? false;
}

export function FeedbackMixin<T extends Constructor>(BaseClass: T) {
  return class FeedbackMixin
    extends FeedbackBaseMixin(BaseClass)
    implements IFeedback
  {
    // add custom fields implementation

    isFeedback() {
      return true;
    }

    async hasLikers(): Promise<boolean> {
      const ct = await this.queryLikers().queryCount();
      return ct > 0;
    }
  };
}
