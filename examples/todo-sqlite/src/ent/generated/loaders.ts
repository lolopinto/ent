// Generated by github.com/lolopinto/ent/ent, DO NOT EDIT.

import { ObjectLoaderFactory } from "@snowtop/ent";
import { getObjectLoaderProperties } from "@snowtop/ent/schema";
import Account from "src/schema/account";
import Tag from "src/schema/tag";
import Todo from "src/schema/todo";
import { NodeType } from "./const";

const accountTable = "accounts";
const accountFields = [
  "id",
  "created_at",
  "updated_at",
  "deleted_at",
  "name",
  "phone_number",
  "account_state",
];

export const accountLoader = new ObjectLoaderFactory({
  tableName: accountTable,
  fields: accountFields,
  key: "id",
  ...getObjectLoaderProperties(Account, accountTable),
});

export const accountPhoneNumberLoader = new ObjectLoaderFactory({
  tableName: accountTable,
  fields: accountFields,
  key: "phone_number",
  ...getObjectLoaderProperties(Account, accountTable),
});

export const accountNoTransformLoader = new ObjectLoaderFactory({
  tableName: accountTable,
  fields: accountFields,
  key: "id",
});

export const accountPhoneNumberNoTransformLoader = new ObjectLoaderFactory({
  tableName: accountTable,
  fields: accountFields,
  key: "phone_number",
});

export const accountLoaderInfo = {
  tableName: accountTable,
  fields: accountFields,
  nodeType: NodeType.Account,
  loaderFactory: accountLoader,
};

accountLoader.addToPrime(accountPhoneNumberLoader);
accountPhoneNumberLoader.addToPrime(accountLoader);

accountNoTransformLoader.addToPrime(accountPhoneNumberNoTransformLoader);
accountPhoneNumberNoTransformLoader.addToPrime(accountNoTransformLoader);

const tagTable = "tags";
const tagFields = [
  "id",
  "created_at",
  "updated_at",
  "deleted_at",
  "display_name",
  "canonical_name",
  "owner_id",
  "related_tag_ids",
];

export const tagLoader = new ObjectLoaderFactory({
  tableName: tagTable,
  fields: tagFields,
  key: "id",
  ...getObjectLoaderProperties(Tag, tagTable),
});

export const tagNoTransformLoader = new ObjectLoaderFactory({
  tableName: tagTable,
  fields: tagFields,
  key: "id",
});

export const tagLoaderInfo = {
  tableName: tagTable,
  fields: tagFields,
  nodeType: NodeType.Tag,
  loaderFactory: tagLoader,
};

const todoTable = "todos";
const todoFields = [
  "id",
  "created_at",
  "updated_at",
  "deleted_at",
  "text",
  "completed",
  "creator_id",
];

export const todoLoader = new ObjectLoaderFactory({
  tableName: todoTable,
  fields: todoFields,
  key: "id",
  ...getObjectLoaderProperties(Todo, todoTable),
});

export const todoNoTransformLoader = new ObjectLoaderFactory({
  tableName: todoTable,
  fields: todoFields,
  key: "id",
});

export const todoLoaderInfo = {
  tableName: todoTable,
  fields: todoFields,
  nodeType: NodeType.Todo,
  loaderFactory: todoLoader,
};

export function getLoaderInfoFromSchema(schema: string) {
  switch (schema) {
    case "Account":
      return accountLoaderInfo;
    case "Tag":
      return tagLoaderInfo;
    case "Todo":
      return todoLoaderInfo;
    default:
      throw new Error(
        `invalid schema ${schema} passed to getLoaderInfoFromSchema`,
      );
  }
}

export function getLoaderInfoFromNodeType(nodeType: NodeType) {
  switch (nodeType) {
    case NodeType.Account:
      return accountLoaderInfo;
    case NodeType.Tag:
      return tagLoaderInfo;
    case NodeType.Todo:
      return todoLoaderInfo;
    default:
      throw new Error(
        `invalid nodeType ${nodeType} passed to getLoaderInfoFromNodeType`,
      );
  }
}
